function WriteThankYous(){$.ajax({url:"/AdminThankYou/GetThankYous",success:function(n){WriteTable(n)},error:function(){window.location.href="/Error"}})}function WriteTable(n){var t,i;if($("#table").empty(),t="<table class='table'>",t+="<tr><th width='25%'>Recipient Name<\/th><th width='25%'>Thank You Date<\/th><th width='25%'>View / Edit<\/th><th width='25%'>Approve<\/th><\/td>",n.result.length>0)for(i=0;i<n.result.length;i++)t+="<tr>",t+="<td>"+n.result[i].recipientName+"<\/td>",t+="<td>"+n.result[i].thankYouDate+"<\/td>",t+="<td>",n.result[i].message!==""&&(t+="<a href='#' class='viewMessage'>View Message<\/a>"),n.result[i].image!==""&&(t+="<a href='#' class='viewImage'>View Image<\/a>"),t+="<input type='hidden' class='id' value='"+n.result[i].donorThankYouId+"'>",t+="<input type='hidden' class='name' value='"+n.result[i].recipientName+"'><\/td>",t+="<td>",t+=n.result[i].approved===!0?"<input class='approve' type='checkbox' checked='checked'/>":"<input class='approve' type='checkbox'/>",t+="<\/td>",t+="<\/tr>";t+="<\/table>";$("#table").append(t)}$(function(){WriteThankYous();$("#table").on("click",".viewImage",function(){$("#thankYouImage").removeAttr("src").addClass("hidden");var n=$(this).parent(),t=n.find(".id"),i=t.val(),r=n.find(".name").val();$.ajax({dataType:"json",url:"/AdminThankYou/GetImageName",data:{donorThankYouId:i},type:"POST",success:function(n){var t="https://secretsantastore.blob.core.windows.net/thankyous/"+n.imageName;$("#thankYouImage").attr("src",t).removeClass("hidden");$("#imageName").text(r);$("#image").modal("show")},error:function(){window.location.href="/Error"}})});$("#table").on("click",".viewMessage",function(){var n=$(this).parent(),i=n.find(".id"),t=i.val(),r=n.find(".name").val();$.ajax({dataType:"json",url:"/AdminThankYou/GetMessage",data:{donorThankYouId:t},type:"POST",success:function(n){$("#thankYouMessage").text(n.message);$("#messageName").text(r);$("#thankYouId").val(t);$("#message").modal("show")},error:function(){window.location.href="/Error"}})});$("#save").click(function(){$.ajax({dataType:"json",url:"/AdminThankYou/SaveMessage",data:{donorThankYouId:$("#thankYouId").val(),message:$("#thankYouMessage").text()},type:"POST",success:function(){$("#message").modal("hide")},error:function(){window.location.href="/Error"}})});$("#table").on("change",".approve",function(){var n=$(this).parent().parent(),t=n.find(".id"),i=t.val(),r=n.find(".approve"),u=$(r).is(":checked");$.ajax({dataType:"json",url:"/AdminThankYou/ChangeApprove",data:{donorThankYouId:i,check:u},type:"POST",success:function(){WriteThankYous()},error:function(){window.location.href="/Error"}})})});