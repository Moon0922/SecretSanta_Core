function editAgency(n){oldAgencyRole=n.roles;$("#Id").val(n.id);$("#AgencyId").val(n.agencyId);$("#Email").val(n.email);$("#FirstName").val(n.firstName);$("#LastName").val(n.lastName);$("#Roles").val(n.roles);$("#Phone").val(n.phone);$("#AltPhone").val(n.altPhone);$("#Fax").val(n.fax);$("#EstimateWishes").val(n.estimateWishes);$("#IsActive").val(n.isActive?"true":"false");$("#Archive").val(n.archive?"true":"false");console.log(n.isActive);$("#editAgencyModal").modal("show")}var oldAgencyRole="";$("#submit").on("click",function(){$("#Archive").val()=="true"?swal({text:"Archive will cause this user to no longer be visible, contact secret santa admin to change it back",icon:"warning",buttons:["Leave as is, return to prior screen","Ok to proceed"]}).then(n=>{if(n)$("#agencyForm").submit();else return}):$("#IsActive").val()=="false"?swal({text:"This user will not be permitted to log in, you can change this back later if you wish",icon:"warning",buttons:["Leave as is, return to prior screen","Ok to proceed"]}).then(n=>{if(n)$("#agencyForm").submit();else return}):$("#Roles").val()=="Leader"&&oldAgencyRole!="Leader"?$.ajax({url:"/AgencyUser/checkLeaders",data:{agencyId:$("#AgencyId").val()},success:function(n){n.count>0&&swal({text:"A leader already exists, do you want to change his role to Primary?",icon:"info",buttons:!0}).then(n=>{n&&$("#agencyForm").submit()})},error:function(n){alert(n.responseText)}}):$("#agencyForm").submit()});