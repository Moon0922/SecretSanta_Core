function GetDraftEdit(n){$.ajax({dataType:"json",url:"/GiftRecipient/GetDraftEdit",data:{agencyId:n},type:"POST",success:function(n){WriteTable(n);$(".chkDashboard").each(function(){$(this).attr("id")=="draft"||$(this).attr("id")=="revise"?$(this).prop("checked",!0):$(this).prop("checked",!1)})},error:function(){window.location.href="/Error"}})}function GetAllRecipientsForAgency(n){$.ajax({dataType:"json",url:"/GiftRecipient/GetAllRecipientsForAgency",data:{agencyId:n},type:"POST",success:function(n){WriteTable(n)},error:function(){window.location.href="/Error"}})}function GetAllGiftsForAgency(n){$.ajax({dataType:"json",url:"/GiftRecipient/GetAllGiftsForAgency",data:{agencyId:n},type:"POST",success:function(n){WriteGiftTable(n)},error:function(){window.location.href="/Error"}})}function WriteTable(n){var i,t;if($("#table").empty(),i="<table class='table table-striped'>",i+="<tr><th>Recipient Num<\/th><th>Name<\/th><th>Age<\/th><th>Gender<\/th><th>Info<\/th><th>First Wish<\/th><th>Second Wish<\/th><th>Status<\/th><th>Edit Notes<\/th><th><\/th><\/tr>",n.result.length>0)for(t=0;t<n.result.length;t++){var r=n.result[t].age!=null&&n.result[t].ageType!=null?n.result[t].age+" "+n.result[t].ageType:"",u=n.result[t].gender!=null?n.result[t].gender:"",f=n.result[t].recipientInfo!=null?n.result[t].recipientInfo:"",e=n.result[t].giftWish!=null?n.result[t].giftWish:"",o=n.result[t].altGiftWish!=null?n.result[t].altGiftWish:"",s=n.result[t].editNotes!=null?n.result[t].editNotes:"";i+="<tr>";i+="<td>"+n.result[t].recipientNum+"<\/td>";i+="<td>"+n.result[t].name+"<\/td>";i+="<td>"+r+"<\/td>";i+="<td>"+u+"<\/td>";i+="<td>"+f+"<\/td>";i+="<td>"+e+"<\/td>";i+="<td>"+o+"<\/td>";i+="<td>"+n.result[t].status+"<\/td>";i+="<td>"+s+"<\/td>";(n.result[t].status=="Draft"||n.result[t].status=="New"||n.result[t].status=="Edit")&&(i+="<td><a href='#' class='edit' id='"+n.result[t].recipientNum+"'>Edit Heart Wish<\/a><\/td>");i+="<\/tr>"}i+="<\/table>";$("#table").append(i)}function WriteGiftTable(n){var i,t;if($("#giftTable").empty(),i="<table class='table table-striped'>",i+="<tr><th>Location<\/th><th>Recipient Num<\/th><th>Label Num<\/th><th>Name<\/th><th>Age<\/th><th>Gender<\/th><th>Info<\/th><th>First Wish<\/th><th>Second Wish<\/th><th>Status<\/th><th>Edit Notes<\/th><\/tr>",n.gifts.length>0)for(t=0;t<n.gifts.length;t++){var r=n.gifts[t].age!=null&&n.gifts[t].ageType!=null?n.gifts[t].age+" "+n.gifts[t].ageType:"",u=n.gifts[t].gender!=null?n.gifts[t].gender:"",f=n.gifts[t].recipientInfo!=null?n.gifts[t].recipientInfo:"",e=n.gifts[t].giftWish!=null?n.gifts[t].giftWish:"",o=n.gifts[t].altGiftWish!=null?n.gifts[t].altGiftWish:"",s=n.gifts[t].editNotes!=null?n.gifts[t].editNotes:"",h=n.gifts[t].location!=null?n.gifts[t].location:"";i+="<tr>";i+="<td>"+h+"<\/td>";i+="<td>"+n.gifts[t].recipientNum+"<\/td>";i+="<td>"+n.gifts[t].labelNum+"<\/td>";i+="<td>"+n.gifts[t].name+"<\/td>";i+="<td>"+r+"<\/td>";i+="<td>"+u+"<\/td>";i+="<td>"+f+"<\/td>";i+="<td>"+e+"<\/td>";i+="<td>"+o+"<\/td>";i+="<td>"+n.gifts[t].status+"<\/td>";i+="<td>"+s+"<\/td>";i+="<\/tr>"}i+="<\/table>";$("#giftTable").append(i)}$(document).ready(function(){var n=$("#agencyId").val();$("#attentionVal").val()==1?GetDraftEdit(n):GetAllRecipientsForAgency(n);GetAllGiftsForAgency(n);$("#btnInfo").click(function(){$("#modalInfo").modal("show")});$("#add").click(function(){window.location.href="/GiftRecipient/Add"});$(".chkDashboard").change(function(){var t=[],i;$("input:checkbox[class=chkDashboard]:checked").each(function(){t.push($(this).val())});console.log(t);t.length>0?(i=JSON.stringify(t),$.ajax({dataType:"json",data:{webGroups:i,agencyId:n},url:"/GiftRecipient/GetRecipientsByStatus",success:function(n){WriteTable(n)},error:function(){window.location.href="/Error"}})):GetAllRecipientsForAgency(n)});$("#attention").click(function(){GetDraftEdit(n)});$("#table").on("click","a.edit",function(){var n=$(this).attr("id");window.location.href="/GiftRecipient/Edit/"+n});$(".chkGift").change(function(){var t=[],i;$("input:checkbox[class=chkGift]:checked").each(function(){t.push($(this).val())});t.length>0?(i=JSON.stringify(t),$.ajax({dataType:"json",data:{webGroups:i,agencyId:n},url:"/GiftRecipient/GetGiftsByStatus",success:function(n){WriteGiftTable(n)},error:function(){window.location.href="/Error"}})):GetAllGiftsForAgency(n)})});